import{d as e,r as l,S as t,bb as a,c as o,ae as r,e as n,h as s,l as p,w as i,B as u,k as d,g as m,n as c,Q as f,R as v,f as g,Y as y,W as b,X as h,V as k,i as _,p as j,D as x,ax as w,E as V,aS as C}from"./index.CPcfy5fd.js";import{v as U}from"./el-loading.DUc5yYfm.js";import"./el-popper.oQ_1tnM-.js";import{E as S}from"./el-popover.CijBp_Od.js";import{_ as E}from"./index.DEl2m0NJ.js";import{E as A,a as N}from"./el-table-column.BrLwSw0l.js";import"./el-checkbox.CxwJjOlx.js";import"./el-tooltip.l0sNRNKZ.js";import"./el-scrollbar.CGy9Vc8U.js";/* empty css               */import{a as R,E as z}from"./el-form-item.lHJDIO-5.js";import{E as I}from"./el-button.DFafuuzN.js";import{E as $}from"./el-date-picker.B_mKDIVz.js";import{E as D}from"./el-input.C_NraZld.js";import{E as K,a as M}from"./el-select.DlbtOjyU.js";import"./el-tree.Bpu2x_8u.js";import{E as Y}from"./el-tree-select.BvQ0LvDh.js";import{_ as L}from"vue3_eman_server/js/plugin-vue_export-helper.BCo6x5W8.js";import{E as P}from"./el-link.x1avvZ9N.js";import{E as T}from"./index.C0I96C1I.js";import"./index.BO5voRhJ.js";import"./index.B2Oee_uC.js";import"./use-form-common-props.BseJruiQ.js";import"./dropdown.D3z6ZJ_U.js";import"./el-pagination.B6JBNGZe.js";import"./isEqual.wucDy0nb.js";import"vue3_eman_server/js/Uint8Array.DxW3ztND.js";import"./index.BzmTEwIo.js";import"./event.CIKxL71l.js";import"./baseIteratee.VRSKdGvw.js";import"./debounce.erloDUjh.js";import"./index.YbX1I6v9.js";import"./castArray.C6a8QyiS.js";import"./dayjs.min.1oJu_83u.js";import"./index.CFbp2rmx.js";import"./index.CKqnEUPD.js";import"./index.BCOw_d-n.js";import"./token.DWNpOE8r.js";import"./strings.C3l49zS7.js";import"./scroll.CE5T6uQg.js";import"./index.C-5mtHV7.js";const B={class:"feedback"},F=L(e({__name:"index",props:{selectConfig:{},text:{default:""}},emits:["confirmClick"],setup(e,{emit:C}){const L=e,P=C,T=L.selectConfig.pk??"id",F=!0===L.selectConfig.multiple,Q=L.selectConfig.width??"100%",X=L.selectConfig.placeholder??"请选择",q=l(!1),H=l(!1),J=l(0),O=l([]),W=t({pageNum:1,pageSize:10}),G=l(),Z=l(Q);a(G,(e=>{Z.value=`${e[0].contentRect.width}px`}));const ee=l();for(const l of L.selectConfig.formItems)W[l.prop]=l.initialValue??"";function le(){var e;null==(e=ee.value)||e.resetFields(),ae(!0)}function te(){ae(!0)}function ae(e=!1){H.value=!0,e&&(W.pageNum=1,W.pageSize=10),L.selectConfig.indexAction(W).then((e=>{J.value=e.total,O.value=e.list})).finally((()=>{H.value=!1}))}const oe=l();for(const l of L.selectConfig.tableColumns)if("selection"===l.type){l.reserveSelection=!0;break}const re=l([]),ne=o((()=>re.value.length>0?`已选(${re.value.length})`:"确 定"));function se(e,l){var t,a,o;F||0===e.length?re.value=e:(re.value=[e[e.length-1]],null==(t=oe.value)||t.clearSelection(),null==(a=oe.value)||a.toggleRowSelection(re.value[0],!0),null==(o=oe.value)||o.setCurrentRow(re.value[0]))}function pe(e){F&&(re.value=e)}function ie(){ae()}const ue=l(!1);function de(){!1===ue.value&&(ue.value=!0,ae())}function me(){0!==re.value.length?(q.value=!1,P("confirmClick",re.value)):w.error("请选择数据")}function ce(){var e;null==(e=oe.value)||e.clearSelection(),re.value=[]}function fe(){q.value=!1}const ve=l();return(e,l)=>{const t=r("ArrowDown"),a=V,o=D,w=K,C=M,L=Y,P=$,ae=R,re=I,ue=z,ge=A,ye=N,be=E,he=S,ke=U;return n(),s("div",{ref_key:"tableSelectRef",ref:G,style:c("width:"+m(Q))},[p(he,y({visible:q.value,width:Z.value,placement:"bottom-end"},e.selectConfig.popover,{onShow:de}),{reference:i((()=>[u("div",{onClick:l[0]||(l[0]=e=>q.value=!q.value)},[d(e.$slots,"default",{},(()=>[p(o,{class:"reference","model-value":e.text,readonly:!0,placeholder:m(X)},{suffix:i((()=>[p(a,{style:c({transform:q.value?"rotate(180deg)":"rotate(0)",transition:"transform .5s"})},{default:i((()=>[p(t)])),_:1},8,["style"])])),_:1},8,["model-value","placeholder"])]),!0)])])),default:i((()=>[u("div",{ref_key:"popoverContentRef",ref:ve},[p(ue,{ref_key:"formRef",ref:ee,model:W,inline:!0},{default:i((()=>[(n(!0),s(f,null,v(e.selectConfig.formItems,(e=>(n(),g(ae,{key:e.prop,label:e.label,prop:e.prop},{default:i((()=>{var l,t;return["input"===e.type?(n(),s(f,{key:0},["number"===(null==(l=e.attrs)?void 0:l.type)?(n(),g(o,y({key:0,modelValue:W[e.prop],"onUpdate:modelValue":l=>W[e.prop]=l,modelModifiers:{number:!0},ref_for:!0},e.attrs,{onKeyup:b(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"])):(n(),g(o,y({key:1,modelValue:W[e.prop],"onUpdate:modelValue":l=>W[e.prop]=l,ref_for:!0},e.attrs,{onKeyup:b(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"]))],64)):"select"===e.type?(n(),g(C,y({key:1,modelValue:W[e.prop],"onUpdate:modelValue":l=>W[e.prop]=l,ref_for:!0},e.attrs),{default:i((()=>[(n(!0),s(f,null,v(e.options,(e=>(n(),g(w,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1040,["modelValue","onUpdate:modelValue"])):"tree-select"===e.type?(n(),g(L,y({key:2,modelValue:W[e.prop],"onUpdate:modelValue":l=>W[e.prop]=l,ref_for:!0},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):"date-picker"===e.type?(n(),g(P,y({key:3,modelValue:W[e.prop],"onUpdate:modelValue":l=>W[e.prop]=l,ref_for:!0},e.attrs),null,16,["modelValue","onUpdate:modelValue"])):(n(),s(f,{key:4},["number"===(null==(t=e.attrs)?void 0:t.type)?(n(),g(o,y({key:0,modelValue:W[e.prop],"onUpdate:modelValue":l=>W[e.prop]=l,modelModifiers:{number:!0},ref_for:!0},e.attrs,{onKeyup:b(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"])):(n(),g(o,y({key:1,modelValue:W[e.prop],"onUpdate:modelValue":l=>W[e.prop]=l,ref_for:!0},e.attrs,{onKeyup:b(te,["enter"])}),null,16,["modelValue","onUpdate:modelValue"]))],64))]})),_:2},1032,["label","prop"])))),128)),p(ae,null,{default:i((()=>[p(re,{type:"primary",icon:"search",onClick:te},{default:i((()=>l[4]||(l[4]=[h("搜索")]))),_:1}),p(re,{icon:"refresh",onClick:le},{default:i((()=>l[5]||(l[5]=[h("重置")]))),_:1})])),_:1})])),_:1},8,["model"]),k((n(),g(ye,{ref_key:"tableRef",ref:oe,data:O.value,border:!0,"max-height":250,"row-key":m(T),"highlight-current-row":!0,class:_({radio:!F}),onSelect:se,onSelectAll:pe},{default:i((()=>[(n(!0),s(f,null,v(e.selectConfig.tableColumns,(l=>(n(),s(f,{key:l.prop},["custom"===l.templet?(n(),g(ge,y({key:0,ref_for:!0},l),{default:i((t=>[d(e.$slots,l.slotName??l.prop,y({prop:l.prop,ref_for:!0},t),void 0,!0)])),_:2},1040)):(n(),g(ge,y({key:1,ref_for:!0},l),null,16))],64)))),128))])),_:3},8,["data","row-key","class"])),[[ke,H.value]]),J.value>0?(n(),g(be,{key:0,total:J.value,"onUpdate:total":l[1]||(l[1]=e=>J.value=e),page:W.pageNum,"onUpdate:page":l[2]||(l[2]=e=>W.pageNum=e),limit:W.pageSize,"onUpdate:limit":l[3]||(l[3]=e=>W.pageSize=e),onPagination:ie},null,8,["total","page","limit"])):j("",!0),u("div",B,[p(re,{type:"primary",size:"small",onClick:me},{default:i((()=>[h(x(ne.value),1)])),_:1}),p(re,{size:"small",onClick:ce},{default:i((()=>l[6]||(l[6]=[h("清 空")]))),_:1}),p(re,{size:"small",onClick:fe},{default:i((()=>l[7]||(l[7]=[h("关 闭")]))),_:1})])],512)])),_:3},16,["visible","width"])],4)}}}),[["__scopeId","data-v-0e3b17e0"]]),Q={pk:"id",width:"70%",placeholder:"请选择用户",formItems:[{type:"input",label:"关键字",prop:"keywords",attrs:{placeholder:"用户名/昵称/手机号",clearable:!0,style:{width:"200px"}}},{type:"tree-select",label:"部门",prop:"deptId",attrs:{placeholder:"请选择",data:[{value:1,label:"有来技术",children:[{value:2,label:"研发部门"},{value:3,label:"测试部门"}]}],filterable:!0,"check-strictly":!0,"render-after-expand":!1,clearable:!0,style:{width:"150px"}}},{type:"select",label:"状态",prop:"status",attrs:{placeholder:"全部",clearable:!0,style:{width:"100px"}},options:[{label:"启用",value:1},{label:"禁用",value:0}]},{type:"date-picker",label:"创建时间",prop:"createAt",attrs:{type:"daterange","range-separator":"~","start-placeholder":"开始时间","end-placeholder":"截止时间","value-format":"YYYY-MM-DD",style:{width:"240px"}}}],indexAction:function(e){if("createAt"in e){const l=e.createAt;(null==l?void 0:l.length)>1&&(e.startTime=l[0],e.endTime=l[1]),delete e.createAt}return C.getPage(e)},tableColumns:[{type:"selection",width:50,align:"center"},{label:"编号",align:"center",prop:"id",width:100},{label:"用户名",align:"center",prop:"username"},{label:"用户昵称",align:"center",prop:"nickname",width:120},{label:"性别",align:"center",prop:"genderLabel",width:100},{label:"部门",align:"center",prop:"deptName",width:120},{label:"手机号码",align:"center",prop:"mobile",width:120},{label:"状态",align:"center",prop:"status",templet:"custom",slotName:"status"},{label:"创建时间",align:"center",prop:"createTime",width:180}]},X={class:"app-container"},q=e({__name:"index",setup(e){const t=l();function a(e){t.value=e[0]}const r=o((()=>t.value?`${t.value.username} - ${t.value.genderLabel} - ${t.value.deptName}`:""));return(e,l)=>{const t=P,o=T,u=F;return n(),s("div",X,[p(t,{href:"https://gitee.com/youlaiorg/vue3-element-admin/blob/master/src/views/demo/table-select/index.vue",type:"primary",target:"_blank",class:"mb-10"},{default:i((()=>l[0]||(l[0]=[h(" 示例源码 请点击>>>> ")]))),_:1}),p(u,{text:m(r),"select-config":m(Q),onConfirmClick:a},{status:i((e=>[p(o,{type:1==e.row[e.prop]?"success":"info"},{default:i((()=>[h(x(1==e.row[e.prop]?"启用":"禁用"),1)])),_:2},1032,["type"])])),_:1},8,["text","select-config"])])}}});export{q as default};
