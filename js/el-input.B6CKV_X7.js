import{H as e,aO as t,t as a,L as o,z as n,v as l,a8 as s,M as i,d as r,br as u,b9 as p,c as d,b as c,s as f,r as m,bQ as v,bR as x,bS as g,N as h,aa as b,I as y,U as w,o as S,ad as C,e as z,h as k,p as I,Q as E,i as $,g as B,k as F,B as N,f as P,w as j,C as M,E as R,Y as _,l as V,bT as H,j as T,by as L,D as O,n as A,ab as W,_ as Q,q as U}from"./index.BtyArP1B.js";import{u as K}from"./index.cmw58G9_.js";import{U as Y,d as q}from"./event.CIKxL71l.js";import{u as D}from"./index.Dmive-Lb.js";import{u as G,c as J,a as X,b as Z}from"./use-form-common-props.CHtSruc5.js";import{u as ee,a as te}from"./index.CNwTtPN2.js";const ae=()=>e&&/firefox/i.test(window.navigator.userAgent);let oe;const ne=`\n  height:0 !important;\n  visibility:hidden !important;\n  ${ae()?"":"overflow:hidden !important;"}\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`,le=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function se(e,a=1,o){var n;oe||(oe=document.createElement("textarea"),document.body.appendChild(oe));const{paddingSize:l,borderSize:s,boxSizing:i,contextStyle:r}=function(e){const t=window.getComputedStyle(e),a=t.getPropertyValue("box-sizing"),o=Number.parseFloat(t.getPropertyValue("padding-bottom"))+Number.parseFloat(t.getPropertyValue("padding-top")),n=Number.parseFloat(t.getPropertyValue("border-bottom-width"))+Number.parseFloat(t.getPropertyValue("border-top-width"));return{contextStyle:le.map((e=>`${e}:${t.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:a}}(e);oe.setAttribute("style",`${r};${ne}`),oe.value=e.value||e.placeholder||"";let u=oe.scrollHeight;const p={};"border-box"===i?u+=s:"content-box"===i&&(u-=l),oe.value="";const d=oe.scrollHeight-l;if(t(a)){let e=d*a;"border-box"===i&&(e=e+l+s),u=Math.max(e,u),p.minHeight=`${e}px`}if(t(o)){let e=d*o;"border-box"===i&&(e=e+l+s),u=Math.min(e,u)}return p.height=`${u}px`,null==(n=oe.parentNode)||n.removeChild(oe),oe=void 0,p}const ie=a({id:{type:String,default:void 0},size:o,disabled:Boolean,modelValue:{type:n([String,Number,Object]),default:""},maxlength:{type:[String,Number]},minlength:{type:[String,Number]},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:n([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String},readonly:Boolean,clearable:Boolean,showPassword:Boolean,showWordLimit:Boolean,suffixIcon:{type:l},prefixIcon:{type:l},containerRole:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:n([Object,Array,String]),default:()=>s({})},autofocus:Boolean,rows:{type:Number,default:2},...K(["ariaLabel"])}),re={[Y]:e=>i(e),input:e=>i(e),change:e=>i(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent};const ue=r({name:"ElInput",inheritAttrs:!1});const pe=U(Q(r({...ue,props:ie,emits:re,setup(t,{expose:a,emit:o}){const n=t,l=u(),s=D(),i=p(),r=d((()=>["textarea"===n.type?ie.b():le.b(),le.m(oe.value),le.is("disabled",ne.value),le.is("exceed",Fe.value),{[le.b("group")]:i.prepend||i.append,[le.m("prefix")]:i.prefix||n.prefixIcon,[le.m("suffix")]:i.suffix||n.suffixIcon||n.clearable||n.showPassword,[le.bm("suffix","password-clear")]:Ie.value&&Ee.value,[le.b("hidden")]:"hidden"===n.type},l.class])),Q=d((()=>[le.e("wrapper"),le.is("focus",xe.value)])),{form:U,formItem:K}=G(),{inputId:ae}=J(n,{formItemContext:K}),oe=X(),ne=Z(),le=c("input"),ie=c("textarea"),re=f(),ue=f(),pe=m(!1),de=m(!1),ce=m(),fe=f(n.inputStyle),me=d((()=>re.value||ue.value)),{wrapperRef:ve,isFocused:xe,handleFocus:ge,handleBlur:he}=ee(me,{beforeFocus:()=>ne.value,afterBlur(){var e;n.validateEvent&&(null==(e=null==K?void 0:K.validate)||e.call(K,"blur").catch((e=>q())))}}),be=d((()=>{var e;return null!=(e=null==U?void 0:U.statusIcon)&&e})),ye=d((()=>(null==K?void 0:K.validateState)||"")),we=d((()=>ye.value&&v[ye.value])),Se=d((()=>de.value?x:g)),Ce=d((()=>[l.style])),ze=d((()=>[n.inputStyle,fe.value,{resize:n.resize}])),ke=d((()=>h(n.modelValue)?"":String(n.modelValue))),Ie=d((()=>n.clearable&&!ne.value&&!n.readonly&&!!ke.value&&(xe.value||pe.value))),Ee=d((()=>n.showPassword&&!ne.value&&!!ke.value&&(!!ke.value||xe.value))),$e=d((()=>n.showWordLimit&&!!n.maxlength&&("text"===n.type||"textarea"===n.type)&&!ne.value&&!n.readonly&&!n.showPassword)),Be=d((()=>ke.value.length)),Fe=d((()=>!!$e.value&&Be.value>Number(n.maxlength))),Ne=d((()=>!!i.suffix||!!n.suffixIcon||Ie.value||n.showPassword||$e.value||!!ye.value&&be.value)),[Pe,je]=function(e){let t;return[function(){if(null==e.value)return;const{selectionStart:a,selectionEnd:o,value:n}=e.value;if(null==a||null==o)return;const l=n.slice(0,Math.max(0,a)),s=n.slice(Math.max(0,o));t={selectionStart:a,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==t)return;const{value:a}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=t;if(null==o||null==n||null==l)return;let s=a.length;if(a.endsWith(n))s=a.length-n.length;else if(a.startsWith(o))s=o.length;else{const e=o[l-1],t=a.indexOf(e,l-1);-1!==t&&(s=t+1)}e.value.setSelectionRange(s,s)}]}(re);b(ue,(e=>{if(Re(),!$e.value||"both"!==n.resize)return;const t=e[0],{width:a}=t.contentRect;ce.value={right:`calc(100% - ${a+15+6}px)`}}));const Me=()=>{const{type:t,autosize:a}=n;if(e&&"textarea"===t&&ue.value)if(a){const e=W(a)?a.minRows:void 0,t=W(a)?a.maxRows:void 0,o=se(ue.value,e,t);fe.value={overflowY:"hidden",...o},w((()=>{ue.value.offsetHeight,fe.value=o}))}else fe.value={minHeight:se(ue.value).minHeight}},Re=(e=>{let t=!1;return()=>{var a;if(t||!n.autosize)return;null===(null==(a=ue.value)?void 0:a.offsetParent)||(e(),t=!0)}})(Me),_e=()=>{const e=me.value,t=n.formatter?n.formatter(ke.value):ke.value;e&&e.value!==t&&(e.value=t)},Ve=async e=>{Pe();let{value:t}=e.target;n.formatter&&(t=n.parser?n.parser(t):t),Te.value||(t!==ke.value?(o(Y,t),o("input",t),await w(),_e(),je()):_e())},He=e=>{o("change",e.target.value)},{isComposing:Te,handleCompositionStart:Le,handleCompositionUpdate:Oe,handleCompositionEnd:Ae}=te({emit:o,afterComposition:Ve}),We=()=>{Pe(),de.value=!de.value,setTimeout(je)},Qe=e=>{pe.value=!1,o("mouseleave",e)},Ue=e=>{pe.value=!0,o("mouseenter",e)},Ke=e=>{o("keydown",e)},Ye=()=>{o(Y,""),o("change",""),o("clear"),o("input","")};return y((()=>n.modelValue),(()=>{var e;w((()=>Me())),n.validateEvent&&(null==(e=null==K?void 0:K.validate)||e.call(K,"change").catch((e=>q())))})),y(ke,(()=>_e())),y((()=>n.type),(async()=>{await w(),_e(),Me()})),S((()=>{!n.formatter&&n.parser,_e(),w(Me)})),a({input:re,textarea:ue,ref:me,textareaStyle:ze,autosize:C(n,"autosize"),isComposing:Te,focus:()=>{var e;return null==(e=me.value)?void 0:e.focus()},blur:()=>{var e;return null==(e=me.value)?void 0:e.blur()},select:()=>{var e;null==(e=me.value)||e.select()},clear:Ye,resizeTextarea:Me}),(e,t)=>(z(),k("div",{class:$([B(r),{[B(le).bm("group","append")]:e.$slots.append,[B(le).bm("group","prepend")]:e.$slots.prepend}]),style:A(B(Ce)),onMouseenter:Ue,onMouseleave:Qe},[I(" input "),"textarea"!==e.type?(z(),k(E,{key:0},[I(" prepend slot "),e.$slots.prepend?(z(),k("div",{key:0,class:$(B(le).be("group","prepend"))},[F(e.$slots,"prepend")],2)):I("v-if",!0),N("div",{ref_key:"wrapperRef",ref:ve,class:$(B(Q))},[I(" prefix slot "),e.$slots.prefix||e.prefixIcon?(z(),k("span",{key:0,class:$(B(le).e("prefix"))},[N("span",{class:$(B(le).e("prefix-inner"))},[F(e.$slots,"prefix"),e.prefixIcon?(z(),P(B(R),{key:0,class:$(B(le).e("icon"))},{default:j((()=>[(z(),P(M(e.prefixIcon)))])),_:1},8,["class"])):I("v-if",!0)],2)],2)):I("v-if",!0),N("input",_({id:B(ae),ref_key:"input",ref:re,class:B(le).e("inner")},B(s),{minlength:e.minlength,maxlength:e.maxlength,type:e.showPassword?de.value?"text":"password":e.type,disabled:B(ne),readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.ariaLabel,placeholder:e.placeholder,style:e.inputStyle,form:e.form,autofocus:e.autofocus,role:e.containerRole,onCompositionstart:B(Le),onCompositionupdate:B(Oe),onCompositionend:B(Ae),onInput:Ve,onChange:He,onKeydown:Ke}),null,16,["id","minlength","maxlength","type","disabled","readonly","autocomplete","tabindex","aria-label","placeholder","form","autofocus","role","onCompositionstart","onCompositionupdate","onCompositionend"]),I(" suffix slot "),B(Ne)?(z(),k("span",{key:1,class:$(B(le).e("suffix"))},[N("span",{class:$(B(le).e("suffix-inner"))},[B(Ie)&&B(Ee)&&B($e)?I("v-if",!0):(z(),k(E,{key:0},[F(e.$slots,"suffix"),e.suffixIcon?(z(),P(B(R),{key:0,class:$(B(le).e("icon"))},{default:j((()=>[(z(),P(M(e.suffixIcon)))])),_:1},8,["class"])):I("v-if",!0)],64)),B(Ie)?(z(),P(B(R),{key:1,class:$([B(le).e("icon"),B(le).e("clear")]),onMousedown:T(B(L),["prevent"]),onClick:Ye},{default:j((()=>[V(B(H))])),_:1},8,["class","onMousedown"])):I("v-if",!0),B(Ee)?(z(),P(B(R),{key:2,class:$([B(le).e("icon"),B(le).e("password")]),onClick:We},{default:j((()=>[(z(),P(M(B(Se))))])),_:1},8,["class"])):I("v-if",!0),B($e)?(z(),k("span",{key:3,class:$(B(le).e("count"))},[N("span",{class:$(B(le).e("count-inner"))},O(B(Be))+" / "+O(e.maxlength),3)],2)):I("v-if",!0),B(ye)&&B(we)&&B(be)?(z(),P(B(R),{key:4,class:$([B(le).e("icon"),B(le).e("validateIcon"),B(le).is("loading","validating"===B(ye))])},{default:j((()=>[(z(),P(M(B(we))))])),_:1},8,["class"])):I("v-if",!0)],2)],2)):I("v-if",!0)],2),I(" append slot "),e.$slots.append?(z(),k("div",{key:1,class:$(B(le).be("group","append"))},[F(e.$slots,"append")],2)):I("v-if",!0)],64)):(z(),k(E,{key:1},[I(" textarea "),N("textarea",_({id:B(ae),ref_key:"textarea",ref:ue,class:[B(ie).e("inner"),B(le).is("focus",B(xe))]},B(s),{minlength:e.minlength,maxlength:e.maxlength,tabindex:e.tabindex,disabled:B(ne),readonly:e.readonly,autocomplete:e.autocomplete,style:B(ze),"aria-label":e.ariaLabel,placeholder:e.placeholder,form:e.form,autofocus:e.autofocus,rows:e.rows,role:e.containerRole,onCompositionstart:B(Le),onCompositionupdate:B(Oe),onCompositionend:B(Ae),onInput:Ve,onFocus:B(ge),onBlur:B(he),onChange:He,onKeydown:Ke}),null,16,["id","minlength","maxlength","tabindex","disabled","readonly","autocomplete","aria-label","placeholder","form","autofocus","rows","role","onCompositionstart","onCompositionupdate","onCompositionend","onFocus","onBlur"]),B($e)?(z(),k("span",{key:0,style:A(ce.value),class:$(B(le).e("count"))},O(B(Be))+" / "+O(e.maxlength),7)):I("v-if",!0)],64))],38))}}),[["__file","input.vue"]]));export{pe as E,ae as i};
