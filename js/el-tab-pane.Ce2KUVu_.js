import{t as e,z as a,a8 as t,d as l,A as s,b as o,r as n,I as r,U as i,aa as u,a5 as c,e as d,h as v,i as b,g as p,n as f,_ as m,F as h,cf as g,cg as y,c as $,o as x,bx as P,l as w,E as C,bm as k,a4 as T,a0 as B,K as E,y as N,k as S,ch as R,aP as A,M as F,aO as _,b9 as K,bU as V,S as j,bV as L,V as q,$ as z,p as M,q as O,G as U}from"./index.CnxhnIvj.js";import{t as W,U as G}from"./event.CIKxL71l.js";import{c as H}from"./strings.BBsaSx6K.js";import{u as I}from"./index.CbLFqOeH.js";const X=Symbol("tabsRootContextKey"),Y=e({tabs:{type:a(Array),default:()=>t([])}}),D="ElTabBar",J=l({name:D});var Q=m(l({...J,props:Y,setup(e,{expose:a}){const t=e,l=h(),m=s(X);m||W(D,"<el-tabs><el-tab-bar /></el-tabs>");const g=o("tabs"),y=n(),$=n(),x=()=>$.value=(()=>{let e=0,a=0;const s=["top","bottom"].includes(m.props.tabPosition)?"width":"height",o="width"===s?"x":"y",n="x"===o?"left":"top";return t.tabs.every((t=>{var o,r;const i=null==(r=null==(o=l.parent)?void 0:o.refs)?void 0:r[`tab-${t.uid}`];if(!i)return!1;if(!t.active)return!0;e=i[`offset${H(n)}`],a=i[`client${H(s)}`];const u=window.getComputedStyle(i);return"width"===s&&(a-=Number.parseFloat(u.paddingLeft)+Number.parseFloat(u.paddingRight),e+=Number.parseFloat(u.paddingLeft)),!1})),{[s]:`${a}px`,transform:`translate${H(o)}(${e}px)`}})(),P=[];r((()=>t.tabs),(async()=>{await i(),x(),(()=>{var e;P.forEach((e=>e.stop())),P.length=0;const a=null==(e=l.parent)?void 0:e.refs;if(a)for(const t in a)if(t.startsWith("tab-")){const e=a[t];e&&P.push(u(e,x))}})()}),{immediate:!0});const w=u(y,(()=>x()));return c((()=>{P.forEach((e=>e.stop())),P.length=0,w.stop()})),a({ref:y,update:x}),(e,a)=>(d(),v("div",{ref_key:"barRef",ref:y,class:b([p(g).e("active-bar"),p(g).is(p(m).props.tabPosition)]),style:f($.value)},null,6))}}),[["__file","tab-bar.vue"]]);const Z=e({panes:{type:a(Array),default:()=>t([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),ee="ElTabNav",ae=l({name:ee,props:Z,emits:{tabClick:(e,a,t)=>t instanceof Event,tabRemove:(e,a)=>a instanceof Event},setup(e,{expose:a,emit:t}){const l=s(X);l||W(ee,"<el-tabs><tab-nav /></el-tabs>");const c=o("tabs"),d=g(),v=y(),b=n(),p=n(),f=n(),m=n(),h=n(!1),N=n(0),S=n(!1),R=n(!0),A=$((()=>["top","bottom"].includes(l.props.tabPosition)?"width":"height")),F=$((()=>({transform:`translate${"width"===A.value?"X":"Y"}(-${N.value}px)`}))),_=()=>{if(!b.value)return;const e=b.value[`offset${H(A.value)}`],a=N.value;if(!a)return;const t=a>e?a-e:0;N.value=t},K=()=>{if(!b.value||!p.value)return;const e=p.value[`offset${H(A.value)}`],a=b.value[`offset${H(A.value)}`],t=N.value;if(e-t<=a)return;const l=e-t>2*a?t+a:e-a;N.value=l},V=async()=>{const e=p.value;if(!(h.value&&f.value&&b.value&&e))return;await i();const a=f.value.querySelector(".is-active");if(!a)return;const t=b.value,s=["top","bottom"].includes(l.props.tabPosition),o=a.getBoundingClientRect(),n=t.getBoundingClientRect(),r=s?e.offsetWidth-n.width:e.offsetHeight-n.height,u=N.value;let c=u;s?(o.left<n.left&&(c=u-(n.left-o.left)),o.right>n.right&&(c=u+o.right-n.right)):(o.top<n.top&&(c=u-(n.top-o.top)),o.bottom>n.bottom&&(c=u+(o.bottom-n.bottom))),c=Math.max(c,0),N.value=Math.min(c,r)},j=()=>{var a;if(!p.value||!b.value)return;e.stretch&&(null==(a=m.value)||a.update());const t=p.value[`offset${H(A.value)}`],l=b.value[`offset${H(A.value)}`],s=N.value;l<t?(h.value=h.value||{},h.value.prev=s,h.value.next=s+l<t,t-s<l&&(N.value=t-l)):(h.value=!1,s>0&&(N.value=0))},L=e=>{let a=0;switch(e.code){case E.left:case E.up:a=-1;break;case E.right:case E.down:a=1;break;default:return}const t=Array.from(e.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let l=t.indexOf(e.target)+a;l<0?l=t.length-1:l>=t.length&&(l=0),t[l].focus({preventScroll:!0}),t[l].click(),q()},q=()=>{R.value&&(S.value=!0)},z=()=>S.value=!1;return r(d,(e=>{"hidden"===e?R.value=!1:"visible"===e&&setTimeout((()=>R.value=!0),50)})),r(v,(e=>{e?setTimeout((()=>R.value=!0),50):R.value=!1})),u(f,j),x((()=>setTimeout((()=>V()),0))),P((()=>j())),a({scrollToActiveTab:V,removeFocus:z}),()=>{const a=h.value?[w("span",{class:[c.e("nav-prev"),c.is("disabled",!h.value.prev)],onClick:_},[w(C,null,{default:()=>[w(k,null,null)]})]),w("span",{class:[c.e("nav-next"),c.is("disabled",!h.value.next)],onClick:K},[w(C,null,{default:()=>[w(T,null,null)]})])]:null,s=e.panes.map(((a,s)=>{var o,n,r,i;const u=a.uid,d=a.props.disabled,v=null!=(n=null!=(o=a.props.name)?o:a.index)?n:`${s}`,b=!d&&(a.isClosable||e.editable);a.index=`${s}`;const p=b?w(C,{class:"is-icon-close",onClick:e=>t("tabRemove",a,e)},{default:()=>[w(B,null,null)]}):null,f=(null==(i=(r=a.slots).label)?void 0:i.call(r))||a.props.label,m=!d&&a.active?0:-1;return w("div",{ref:`tab-${u}`,class:[c.e("item"),c.is(l.props.tabPosition),c.is("active",a.active),c.is("disabled",d),c.is("closable",b),c.is("focus",S.value)],id:`tab-${v}`,key:`tab-${u}`,"aria-controls":`pane-${v}`,role:"tab","aria-selected":a.active,tabindex:m,onFocus:()=>q(),onBlur:()=>z(),onClick:e=>{z(),t("tabClick",a,v,e)},onKeydown:e=>{!b||e.code!==E.delete&&e.code!==E.backspace||t("tabRemove",a,e)}},[f,p])}));return w("div",{ref:f,class:[c.e("nav-wrap"),c.is("scrollable",!!h.value),c.is(l.props.tabPosition)]},[a,w("div",{class:c.e("nav-scroll"),ref:b},[w("div",{class:[c.e("nav"),c.is(l.props.tabPosition),c.is("stretch",e.stretch&&["top","bottom"].includes(l.props.tabPosition))],ref:p,style:F.value,role:"tablist",onKeydown:L},[e.type?null:w(Q,{ref:m,tabs:[...e.panes]},null),s])])])}}}),te=e({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:a(Function),default:()=>!0},stretch:Boolean}),le=e=>F(e)||_(e);var se=l({name:"ElTabs",props:te,emits:{[G]:e=>le(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>le(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>le(e),tabAdd:()=>!0},setup(e,{emit:a,slots:t,expose:l}){var s;const u=o("tabs"),c=$((()=>["left","right"].includes(e.tabPosition))),{children:d,addChild:v,removeChild:b}=I(h(),"ElTabPane"),p=n(),f=n(null!=(s=e.modelValue)?s:"0"),m=async(t,l=!1)=>{var s,o,n;if(f.value!==t&&!A(t))try{!1!==await(null==(s=e.beforeLeave)?void 0:s.call(e,t,f.value))&&(f.value=t,l&&(a(G,t),a("tabChange",t)),null==(n=null==(o=p.value)?void 0:o.removeFocus)||n.call(o))}catch(r){}},g=(e,t,l)=>{e.props.disabled||(m(t,!0),a("tabClick",e,l))},y=(e,t)=>{e.props.disabled||A(e.props.name)||(t.stopPropagation(),a("edit",e.props.name,"remove"),a("tabRemove",e.props.name))},x=()=>{a("edit",void 0,"add"),a("tabAdd")};r((()=>e.modelValue),(e=>m(e))),r(f,(async()=>{var e;await i(),null==(e=p.value)||e.scrollToActiveTab()})),N(X,{props:e,currentName:f,registerPane:e=>{d.value.push(e)},sortPane:v,unregisterPane:b}),l({currentName:f});const P=({render:e})=>e();return()=>{const a=t["add-icon"],l=e.editable||e.addable?w("div",{class:[u.e("new-tab"),c.value&&u.e("new-tab-vertical")],tabindex:"0",onClick:x,onKeydown:e=>{[E.enter,E.numpadEnter].includes(e.code)&&x()}},[a?S(t,"add-icon"):w(C,{class:u.is("icon-plus")},{default:()=>[w(R,null,null)]})]):null,s=w("div",{class:[u.e("header"),c.value&&u.e("header-vertical"),u.is(e.tabPosition)]},[w(P,{render:()=>{const a=d.value.some((e=>e.slots.label));return w(ae,{ref:p,currentName:f.value,editable:e.editable,type:e.type,panes:d.value,stretch:e.stretch,onTabClick:g,onTabRemove:y},{$stable:!a})}},null),l]),o=w("div",{class:u.e("content")},[S(t,"default")]);return w("div",{class:[u.b(),u.m(e.tabPosition),{[u.m("card")]:"card"===e.type,[u.m("border-card")]:"border-card"===e.type}]},[o,s])}}});const oe=e({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),ne="ElTabPane",re=l({name:ne});var ie=m(l({...re,props:oe,setup(e){const a=e,t=h(),l=K(),i=s(X);i||W(ne,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const u=o("tab-pane"),c=n(),f=$((()=>a.closable||i.props.closable)),m=V((()=>{var e;return i.currentName.value===(null!=(e=a.name)?e:c.value)})),g=n(m.value),y=$((()=>{var e;return null!=(e=a.name)?e:c.value})),P=V((()=>!a.lazy||g.value||m.value));r(m,(e=>{e&&(g.value=!0)}));const w=j({uid:t.uid,slots:l,props:a,paneName:y,active:m,index:c,isClosable:f});return i.registerPane(w),x((()=>{i.sortPane(w)})),L((()=>{i.unregisterPane(w.uid)})),(e,a)=>p(P)?q((d(),v("div",{key:0,id:`pane-${p(y)}`,class:b(p(u).b()),role:"tabpanel","aria-hidden":!p(m),"aria-labelledby":`tab-${p(y)}`},[S(e.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[z,p(m)]]):M("v-if",!0)}}),[["__file","tab-pane.vue"]]);const ue=O(se,{TabPane:ie}),ce=U(ie);export{ce as E,ue as a};
